# 作りのあれこれ

## 作り始めた時に考えたこと

### コンポーネントをどうやって作るか

* hooksが出たことでFunctional Componentでもstateが持てる
* 最終的にReactはFunctional Componentに寄せていく気満々なのでFunctional Componentのみにする

### テストについて

* テストでどんなもの見つけたいか決めていない
* どのみち見た目を確認するためstorybookで確認する
* 何回かブラッシュアップするので最初はテスト作らないであとで苦しむ

### 状態管理をどうするか

* 規模的にどう考えてもReduxを使用しないでもできる（context?とhooksでいけるはず）
* しかし学習という側面からんまずはReduxでやってみる

### TypeScriptについて

* Reactに慣れるため作ってる目的もあるので今回はやらない
* まずはなしでやってみて今後ありにした時の効果をみる

### CSSについて

* Create React Appにてデフォルトで使えるCSS Modulesを使う
* Styled Componentsの方が支持を受けているが以下の理由により使用しない
  * 再利用性の下がる書き方はできるだけ行わないとした時に必要性が見えてこない
  * 単にコンポーネントにスタイルを当てたいという目的のため別のライブラリの導入は意味ない
  * どのみちライブラリ固有の記法は今覚えない（BEMやFLOCSSの方が有用であるという意見もある）
* 再利用性とスタイルの共通化をするためSCSSで記載する
* コンポーネントの構造にセレクターを依存させないため、基本的にクラスに対してスタイルを記載する

### 双方向通信について

* WebSocketも使いたかったけどFirebaseで今回はやってみる
* この決定には深い意味はない

### ディレクトリ構成について

* 作ってて意味わからなくならないように何か指針を持たせるためAtomic Designを真似てみる

### コンポーネントについて

* 何もなしにコンポーネント作れない
* 最初に全体の画面イメージなりがあってコンポーネント抽出ができるからまず画面イメージつくる
* できるだけ小さいコンポーネントを作る。スタイルを当てる上でも楽になる。（意味があったかはあとで評価する）

## 作って思ったこと

### コンポーネントについて思ったこと

#### Good

* Reactではpropsの展開をスプレッド演算子で書ける
  * vueならv-bindでスプレッドして渡せるらしい

#### Bad

* classを固定値とpropsから出した時書き方が面倒
  * もともとclassNameがあるとスプレッド演算子で展開しても無視される
  * vueならclassと:classが別々だったらいい感じにした
* ReactのonChageはどう考えてもonchangeじゃないoninput相当の動きをしてる
  * 公式ドキュメントにも違うと書いてた
* style属性はベンダープレフィックスを入れてくれないし、オブジェクトで指定する必要がある

#### その他

* 当たり前だけどvalueにpropsを直接渡すと変更ができなくなる。stateにちゃんと持たせる。
* vueにあったemitがなく関数の参照だけ渡せば良い
